---

---

<div id="overlay" class="overlay show">
  <div class="bar"></div>
  <div class="bar"></div>
  <div class="bar"></div>
  <div class="bar"></div>
  <div class="bar"></div>
  <div class="bar"></div>
  <div class="bar"></div>
  <div class="bar"></div>
  <div class="bar"></div>
  <div class="bar"></div>
</div>

<style lang="scss">
  $primary: hsl(143, 100%, 27.5%);
  $secondary: $primary;
  // $secondary: hsl(75, 55.6%, 51.4%);

  .overlay {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 1000;

    &.show {
      .bar {
        transform: scale(1, 1) translate3d(0, 0, 0);
        transform-origin: 0 0;
      }
    }

    .bar {
      position: absolute;
      width: 10.1vw;
      background: $secondary;
      top: 0;
      bottom: 0;
      transform: scale(0, 1) translate3d(0, 0, 0);
      transform-origin: 100% 100%;
      transition: transform 0.5s ease-in-out;

      $light: $secondary;
      $dark: mix(black, $secondary, 5%);

      @for $x from 1 through 10 {
        &:nth-of-type(#{$x}) {
          left: ($x - 1) * 10vw;
          background: linear-gradient(to right, $light 0%, $dark 100%);
          transition-delay: 0.06s * $x;
        }

        $light: $dark;
        $dark: mix(black, $secondary, ($x * 5%));
      }
    }
  }
</style>

<script>
  import { gsap } from "gsap"

  document.addEventListener("astro:page-load", () => {
    window.scrollTo(0, 0)

    // const ham = document.querySelector(".hamburger")

    // ham?.addEventListener("click", () => {
    //   console.log("clicked")
    // })

    const overlay = document.getElementById("overlay")

    if (overlay) {
      overlay.classList.remove("show")

      const bars = overlay.querySelectorAll(".bar")
      const middleBar = bars[Math.floor(bars.length / 2)]
      const lastBar = bars[bars.length - 1]

      lastBar.addEventListener("transitionend", () => {
        overlay.style.display = "none"
      })

      middleBar.addEventListener("transitionend", () => {
        animateOnLoad()
        showHeader()
      })
    }

    function animateOnLoad() {
      gsap.to(".animate-fade-in-on-load", {
        opacity: 1,
        y: 0,
        duration: 0.5,
        stagger: 0.2,
        ease: "power1.out",
      })
    }

    function showHeader() {
      gsap.to(".header", {
        y: 0,
        duration: 0.5,
        delay: 0.3,
        ease: "power1.out",
      })
    }
  })
</script>
